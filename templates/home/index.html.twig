{% extends 'base.html.twig' %}

{% block body %}

    <div class="alert alert-info" ><b>changer le lien du serveur dans <i>templates/home/index.twig</i> pour pointer sur le server symfony</b></div>

    <h1>Inscription des membre <span v-text="date_de_naissance"></span></h1>

    <hr/>

    <form>
        <div class="row">
            <div class="col-sm-12 col-md-6">
                <div class="form-group">
                    <label for="Nom">Nom</label>
                    <input type="text" class="form-control" id="Nom" v-model="nom" name="nom">
                </div>
                <div class="form-group">
                    <label for="Prenom">Prenom</label>
                    <input type="text" class="form-control" id="Prenom" v-model="prenom" name="prenom">
                </div>
                <div class="form-group">
                    <label for="date_de_naissance">Date de naissance</label>
                    <input type="date" class="form-control" required id="date_de_naissance" v-model="date_de_naissance" name="date_de_naissance" format="yyyy-MM-dd">
                </div>
            </div>
            <div class="col-sm-12 col-md-6">
                <div class="form-group">
                    <label for="Telephone">Telephone</label>
                    <input type="text" required class="form-control" id="Telephone" v-model="telephone" name="telephone" pattern="[0]{1}[6,7]{1} [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}" title="telephone marocain 06/7 xx xx xx xx">
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-group form-check mb-0">
                            <input type="radio" required class="form-check-input" id="Home" value="H" v-model="sexe" name="sexe">
                            <label class="form-check-label" for="Home">Home</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group form-check mb-0">
                            <input type="radio" required class="form-check-input" id="femme" value="F" v-model="sexe" name="sexe">
                            <label class="form-check-label" for="femme">Femme</label>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <div class="col">
                        <div class="form-group form-check">
                            <input type="radio" checked class="form-check-input" id="Marocain" value="M" v-model="pays" name="pays">
                            <label class="form-check-label" for="Marocain">Marocain</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group form-check">
                            <input type="radio" class="form-check-input" id="Etranger" value="E" v-model="pays" name="pays">
                            <label class="form-check-label" for="Etranger">Etranger</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary" v-on:click="SaveMember($event)" >Submit</button>
    </form>


{% endblock %}

{% block javascripts %}

<script>
    var app = new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue!',
            nom:"",
            prenom:"",
            date_de_naissance:"",
            telephone:"",
            sexe:"H",
            pays:"M",
        },
        methods: {
            SaveMember: function(event) {
                // now we have access to the native event
                if (event) {
                    event.preventDefault()
                }
                // Send a POST request
                axios({
                    method: 'post',
                    url: 'http://127.0.0.1:8000/new/member',
                    data: this.$data
                })
                .then(response => {
                    console.log(response);
                })
                .catch(err => {
                    alert('add error msg')
                });
                
            }
        }
    })
</script>

{% endblock %}