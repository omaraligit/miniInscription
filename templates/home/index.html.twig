{% extends 'base.html.twig' %}

{% block body %}

    <div class="alert alert-info" ><b>changer le lien du serveur dans <i>templates/home/index.twig</i> pour pointer sur le server symfony</b></div>

    <h1>Inscription des membre <span v-text="date_de_naissance"></span></h1>

    <hr/>

    <form>
        <div class="row">
            <div class="col-sm-12 col-md-6">
                <div class="form-group">
                    <label for="Nom">Nom</label>
                    <input type="text" class="form-control" id="Nom" v-model="nom" name="nom">
                </div>
                <div class="form-group">
                    <label for="Prenom">Prenom</label>
                    <input type="text" class="form-control" id="Prenom" v-model="prenom" name="prenom">
                </div>
                <div class="form-group">
                    <label for="date_de_naissance">Date de naissance</label>
                    <input type="date" class="form-control" required id="date_de_naissance" v-model="date_de_naissance" name="date_de_naissance" format="yyyy-MM-dd">
                </div>
            </div>
            <div class="col-sm-12 col-md-6">
                <div class="form-group">
                    <label for="Telephone">Telephone</label>
                    <input type="text" required class="form-control" id="Telephone" v-model="telephone" name="telephone" pattern="[0]{1}[6,7]{1} [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}" title="telephone marocain 06/7 xx xx xx xx">
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-group form-check mb-0">
                            <input type="radio" required class="form-check-input" id="Home" v-model="sexe" name="sexe">
                            <label class="form-check-label" for="Home">Home</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group form-check mb-0">
                            <input type="radio" required class="form-check-input" id="femme" v-model="sexe" name="sexe">
                            <label class="form-check-label" for="femme">Femme</label>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <div class="col">
                        <div class="form-group form-check">
                            <input type="radio" checked class="form-check-input" id="Marocain" v-model="pays" name="pays">
                            <label class="form-check-label" for="Marocain">Marocain</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group form-check">
                            <input type="radio" class="form-check-input" id="Etranger" v-model="pays" name="pays">
                            <label class="form-check-label" for="Etranger">Etranger</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary" v-on:click="warn('Form cannot be submitted yet.', $event)" >Submit</button>
    </form>


{% endblock %}

{% block javascripts %}

<script>
    var app = new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue!',
            nom:"",
            prenom:"",
            date_de_naissance:"",
            telephone:"",
            sexe:"",
            pays:"",
        },
        methods: {
            warn: (message, event) => {
                // now we have access to the native event
                if (event) {
                    event.preventDefault()
                }
                fetch("http://localhost:8000/new/member", {
                    method: 'POST', // *GET, POST, PUT, DELETE, etc.
                    mode: 'no-cors', // no-cors, *cors, same-origin
                    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                    credentials: 'same-origin', // include, *same-origin, omit
                    headers: {
                    'Content-Type': 'application/json'
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    redirect: 'follow', // manual, *follow, error
                    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                    body: JSON.stringify(this.data) // body data type must match "Content-Type" header
                });
            }
        }
    })
</script>

{% endblock %}